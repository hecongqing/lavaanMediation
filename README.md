# lavaanMediation

A tiny Shiny app for mediation analysis (X → M → Y) built on **lavaan**. Use it as a standalone Shiny app or as an R package exposing `run_app()`.

> Repo: **SSH** `git@github.com:hecongqing/lavaanMediation.git` · **HTTPS** `https://github.com/hecongqing/lavaanMediation`

---

## Features

* Interactive mediation model: `X → M → Y`
* One-click fitting with `lavaan::sem()` and **bootstrap CIs**
* Standardized coefficients, parameter table with 95% CIs
* Optional path diagram via **semPlot** (graceful fallback if missing)
* Upload CSV or use built‑in demo data

---

## Requirements

* **R ≥ 4.1** (native pipe `|>` supported; latest R recommended)
* Packages: `shiny`, `lavaan`
* Optional: `semPlot` (path diagram), `bslib` (modern theming)

Install core/optional deps:

```r
install.packages(c("shiny", "lavaan", "semPlot", "bslib"), dependencies = TRUE)
# Slow network? Use a mirror & longer timeout:
options(repos = c(CRAN = "https://mirrors.ustc.edu.cn/CRAN/"), timeout = 600)
```

---

## Quick start

### Option 1 — Install from GitHub (recommended)

```r
install.packages("pak")
pak::pkg_install("hecongqing/lavaanMediation")
library(lavaanMediation)
run_app()                  # launches the Shiny app
```

### Option 2 — Install directly via SSH from R

*(requires your SSH key to be added to GitHub)*

```r
install.packages("remotes")
remotes::install_git("git@github.com:hecongqing/lavaanMediation.git")
library(lavaanMediation)
run_app()
```

### Option 3 — Clone the repo and run without installing the package

```bash
git clone git@github.com:hecongqing/lavaanMediation.git
cd lavaanMediation
```

In R:

```r
shiny::runApp("inst/app")
```

---

## Using the app

1. **Data**: Upload a CSV *or* tick **Use built-in demo data**.
2. **Map variables**: Select columns for **X** (independent), **M** (mediator), **Y** (dependent).
3. **Bootstrap reps**: Default **500** (for CIs of the indirect effect).
4. Click **Run analysis**.

**Model (lavaan syntax)**

```
M ~ a*X
Y ~ b*M + cprime*X
indirect := a*b
total := cprime + a*b
```

The app shows the model spec, an overview with fit measures & standardized estimates, a parameter table (est, SE, z, p, CI, std.), and—if available—the path diagram.

---

## Data format

CSV with ≥ 3 numeric columns (names are flexible; you map them in the UI).

```csv
X,M,Y
-0.12,-0.34,-0.28
0.56,0.21,0.49
...
```

---

## Package structure

```
lavaanMediation/
  inst/app/app.R      # Shiny UI & server
  R/run_app.R         # exports run_app()
  DESCRIPTION         # package metadata
  NAMESPACE           # generated by roxygen2
  README.md
```

`run_app()` locates `inst/app/` and launches `shiny::runApp()`.

---




